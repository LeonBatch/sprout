class f{constructor(){const l=document.querySelectorAll(".sitemap-settings .lightswitch"),o=document.querySelectorAll(".sitemap-settings select"),e=document.querySelectorAll(".sitemap-settings input.sitemap-custom-url"),d=document.querySelectorAll("#custom-pages tbody tr td a.delete");for(const t of l)t.addEventListener("click",this.updateSitemap);for(const t of o)t.addEventListener("change",this.updateSitemap);for(const t of e)t.addEventListener("change",this.updateSitemap);for(const t of d)t.addEventListener("click",this.deleteCustomPage)}updateSitemap(l){let o=l.target,e=o.closest("tr"),d=e.dataset.sourceKey;e.dataset.isNew;let t=e.querySelector(".enabled-status input").value,n=document.getElementById("current-site-id").value,r=e.querySelector(".sitemap-metadata-uri").value,c=e.querySelector("span.status"),u={sitemapMetadataId:e.dataset.sitemapMetadataId,sourceKey:d,type:e.dataset.type,elementGroupId:e.dataset.elementGroupId,uri:r,priority:e.querySelector(".sitemap-priority select").value,changeFrequency:e.querySelector(".sitemap-change-frequency select").value,enabled:t,siteId:n};Craft.postActionRequest("sprout-module-sitemaps/sitemap-metadata/save-sitemap-metadata",u,$.proxy(function(s,g){if(g==="success")if(s.success){let p=d.split("-")[0],a=null;s.sitemapMetadata.elementGroupId?a=p+"-"+s.sitemapMetadata.elementGroupId:a=p+"-"+s.sitemapMetadata.id;let m=$(o).closest("tr"),y=m.find("a.sprout-sectiontitle");m.data("isNew")&&(y.attr("href","sections/"+s.sitemapMetadata.id),m.removeClass("sitemapsection-isnew"),m.data("isNew",0),m.data("sitemapMetadataId",s.sitemapMetadata.id),y.unbind("click"));let i='input[name="sitemaps['+a+"]";$(i+'[id]"]').val(a),$(i+'[id]"]').attr("name","sitemaps["+a+"][id]"),$(i+'[elementGroupId]"]').attr("name","sitemaps["+a+"][elementGroupId]"),$(i+'[priority]"]').attr("name","sitemaps["+a+"][priority]"),$(i+'[changeFrequency]"]').attr("name","sitemaps["+a+"][changeFrequency]"),$(i+'[enabled]"]').attr("name","sitemaps["+a+"][enabled]"),Craft.cp.displayNotice(Craft.t("sprout-module-sitemaps","Sitemap metadata saved."))}else Craft.cp.displayError(Craft.t("sprout-module-sitemaps","Unable to save Sitemap metadata."))},this)),t?(c.classList.remove("disabled"),c.classList.add("live")):(c.classList.remove("live"),c.classList.add("disabled"))}deleteCustomPage(l){let e=l.target.parentElement.parentElement,t={id:e.getAttribute("data-sitemap-metadata-id")};Craft.postActionRequest("sprout-module-sitemaps/sitemap-metadata/delete-sitemap-by-id",t,$.proxy(function(n,r){n.success&&e.remove(),document.querySelectorAll("#custom-pages tbody tr").length<=0&&document.getElementById("custom-pages").remove()},this))}}window.SproutSeoSitemapIndex=f;
//# sourceMappingURL=sitemaps-e9bff86d.js.map
