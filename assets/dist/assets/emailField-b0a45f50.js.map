{"version":3,"file":"emailField-b0a45f50.js","sources":["../../src/fields/EmailField.js"],"sourcesContent":["import './email-field.scss';\n\n/* global Craft */\n\nclass SproutEmailField {\n\n    constructor(namespaceInputId, id, elementId, fieldHandle, fieldContext) {\n        this.sproutEmailFieldId = namespaceInputId;\n        this.sproutEmailButtonClass = '.' + id;\n\n        this.checkSproutEmailField(elementId, fieldHandle, fieldContext);\n    }\n\n    checkSproutEmailField(elementId, fieldHandle, fieldContext) {\n        let self = this;\n\n        // We use setTimeout to make sure our function works every time\n        setTimeout(function() {\n            // Set up data for the controller.\n            let data = {\n                'elementId': elementId,\n                'fieldContext': fieldContext,\n                'fieldHandle': fieldHandle,\n                'value': document.getElementById(self.sproutEmailFieldId).value,\n            };\n\n            // Query the controller so the regex validation is all done through PHP.\n            Craft.sendActionRequest('POST', 'sprout-module-forms/fields/validate-email', {\n                data: data,\n            }).then((response) => {\n                if (response.data.success) {\n                    document.querySelector(self.sproutEmailButtonClass).classList.add('fade');\n                    document.querySelector(self.sproutEmailButtonClass + ' a').setAttribute('href', 'mailto:' + data.value);\n                } else {\n                    document.querySelector(self.sproutEmailButtonClass).classList.remove('fade');\n                }\n            });\n\n        }, 500);\n    }\n}\n\nwindow.SproutEmailField = SproutEmailField;\n"],"names":["SproutEmailField","namespaceInputId","id","elementId","fieldHandle","fieldContext","self","data","response"],"mappings":"AAIA,MAAMA,CAAiB,CAEnB,YAAYC,EAAkBC,EAAIC,EAAWC,EAAaC,EAAc,CACpE,KAAK,mBAAqBJ,EAC1B,KAAK,uBAAyB,IAAMC,EAEpC,KAAK,sBAAsBC,EAAWC,EAAaC,CAAY,CAClE,CAED,sBAAsBF,EAAWC,EAAaC,EAAc,CACxD,IAAIC,EAAO,KAGX,WAAW,UAAW,CAElB,IAAIC,EAAO,CACP,UAAaJ,EACb,aAAgBE,EAChB,YAAeD,EACf,MAAS,SAAS,eAAeE,EAAK,kBAAkB,EAAE,KAC1E,EAGY,MAAM,kBAAkB,OAAQ,4CAA6C,CACzE,KAAMC,CACtB,CAAa,EAAE,KAAMC,GAAa,CACdA,EAAS,KAAK,SACd,SAAS,cAAcF,EAAK,sBAAsB,EAAE,UAAU,IAAI,MAAM,EACxE,SAAS,cAAcA,EAAK,uBAAyB,IAAI,EAAE,aAAa,OAAQ,UAAYC,EAAK,KAAK,GAEtG,SAAS,cAAcD,EAAK,sBAAsB,EAAE,UAAU,OAAO,MAAM,CAE/F,CAAa,CAEJ,EAAE,GAAG,CACT,CACL,CAEA,OAAO,iBAAmBN"}