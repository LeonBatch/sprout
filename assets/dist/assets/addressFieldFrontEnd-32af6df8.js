/*
 * @link https://sprout.barrelstrengthdesign.com
 * @copyright Copyright (c) Barrel Strength Design LLC
 * @license https://craftcms.github.io/license
 */class l{constructor(e){this.formId=e,this.form=document.getElementById(this.formId),this.countrySelectFields=this.form.querySelectorAll(".sprout-address-country-select"),this.countrySelectFields.length!==0&&this.initCountrySelectFields()}initCountrySelectFields(){let e=this;for(let t=0;t<this.countrySelectFields.length;t++)this.countrySelectFields[t].addEventListener("change",function(r){e.updateFormFields(this)})}updateFormFields(e){let t=this;this.form=e.closest("form");let n={action:"sprout-base-fields/fields-address/update-address-form-html",namespace:e.closest("[data-namespace]").dataset.namespace,countryCode:e.value,overrideTemplatePaths:!0};n[window.csrfTokenName]=this.form.querySelector('[name="'+window.csrfTokenName+'"]').value;let s=new XMLHttpRequest;s.open("POST","/",!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8"),s.setRequestHeader("Accept","application/json; charset=utf-8"),s.onreadystatechange=function(){if(s.readyState===4&&s.status===200){let o=JSON.parse(s.response);t.removeCountrySpecificElements();let d=t.form.querySelector(".sprout-address-country-fields");d.innerHTML=o.html}};let i=Object.keys(n).map(function(o){return encodeURIComponent(o)+"="+encodeURIComponent(n[o])}).join("&");s.send(i)}removeCountrySpecificElements(){let e=this.form.querySelectorAll(".sprout-address-onchange-country");for(let t in e)if(e.hasOwnProperty(t)){let r=e[t];typeof r.parentNode<"u"&&r.parentNode.removeChild(r)}}}window.SproutFormsAddressField=l;
//# sourceMappingURL=addressFieldFrontEnd-32af6df8.js.map
