class y{constructor(){const o=document.querySelectorAll(".sitemap-settings .lightswitch"),l=document.querySelectorAll(".sitemap-settings select"),t=document.querySelectorAll(".sitemap-settings input.sitemap-custom-url"),s=document.querySelectorAll("#custom-pages tbody tr td a.delete");for(const e of o)e.addEventListener("click",this.updateSitemap);for(const e of l)e.addEventListener("change",this.updateSitemap);for(const e of t)e.addEventListener("change",this.updateSitemap);for(const e of s)e.addEventListener("click",this.deleteCustomPage)}updateSitemap(o){let l=o.target,t=$(l).closest("tr"),s=t.data("rowid");t.data("isNew");let e=$('input[name="sitemaps[sections]['+s+'][enabled]"]').val(),m=$('input[name="siteId"]').val(),r=$('input[name="sitemaps[sections]['+s+'][uri]"]').val(),c=$('tr[data-rowid="'+s+'"] td span.status'),u={id:t.data("id"),type:t.data("type"),urlEnabledSectionId:t.data("urlEnabledSectionId"),uri:r,priority:$('select[name="sitemaps[sections]['+s+'][priority]"]').val(),changeFrequency:$('select[name="sitemaps[sections]['+s+'][changeFrequency]"]').val(),enabled:e,siteId:m};Craft.postActionRequest("sprout-module-sitemaps/sitemaps/save-sitemap-section",u,$.proxy(function(i,S){if(S==="success")if(i.success){let p=s.split("-")[0],a=null;i.sitemapSection.urlEnabledSectionId?a=p+"-"+i.sitemapSection.urlEnabledSectionId:a=p+"-"+i.sitemapSection.id;let d=$(l).closest("tr"),g=d.find("a.sprout-sectiontitle");d.data("isNew")&&(g.attr("href","sections/"+i.sitemapSection.id),d.removeClass("sitemapsection-isnew"),d.data("isNew",0),d.data("id",i.sitemapSection.id),g.unbind("click"));let n='input[name="sitemaps[sections]['+s+"]";$(n+'[id]"]').val(a),$(n+'[id]"]').attr("name","sitemaps[sections]["+a+"][id]"),$(n+'[urlEnabledSectionId]"]').attr("name","sitemaps[sections]["+a+"][urlEnabledSectionId]"),$(n+'[priority]"]').attr("name","sitemaps[sections]["+a+"][priority]"),$(n+'[changeFrequency]"]').attr("name","sitemaps[sections]["+a+"][changeFrequency]"),$(n+'[enabled]"]').attr("name","sitemaps[sections]["+a+"][enabled]"),Craft.cp.displayNotice(Craft.t("sprout-module-sitemaps","Sitemap metadata saved."))}else Craft.cp.displayError(Craft.t("sprout-module-sitemaps","Unable to save Sitemap metadata."))},this)),e?(c.removeClass("disabled"),c.addClass("live")):(c.removeClass("live"),c.addClass("disabled"))}deleteCustomPage(o){let t=o.target.parentElement.parentElement,e={id:t.getAttribute("data-id")};Craft.postActionRequest("sprout-module-sitemaps/sitemaps/delete-sitemap-by-id",e,$.proxy(function(m,r){m.success&&t.remove(),document.querySelectorAll("#custom-pages tbody tr").length<=0&&document.getElementById("custom-pages").remove()},this))}}window.SproutSeoSitemapIndex=y;
//# sourceMappingURL=sitemaps-458b22ea.js.map
