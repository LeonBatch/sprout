{"version":3,"file":"sitemapMetadata-aa3bb398.js","sources":["../../src/sitemaps/SitemapMetadataRow.js","../../src/sitemaps/SitemapMetadata.js"],"sourcesContent":["export const SitemapMetadataRow = () => ({\n\n    row: null,\n    sitemapMetadataId: null,\n    siteId: null,\n    sourceKey: null,\n    type: null,\n    uri: null,\n    priority: null,\n    changeFrequency: null,\n    enabled: '0',\n    status: null,\n\n    init() {\n\n        this.row = this.$refs.sitemapMetadataRow;\n        this.status = this.row.querySelector('span.status');\n\n        this.sitemapMetadataId = this.row.dataset.sitemapMetadataId ?? null;\n        this.siteId = this.row.dataset.siteId;\n        this.sourceKey = this.row.dataset.sourceKey;\n        this.type = this.row.dataset.type;\n        this.uri = this.row.dataset.uri;\n        this.priority = this.row.dataset.priority;\n        this.changeFrequency = this.row.dataset.changeFrequency;\n        this.enabled = this.row.dataset.enabled;\n    },\n\n    saveSitemapMetadata() {\n        let self = this;\n\n        Craft.sendActionRequest('POST', 'sprout-module-sitemaps/sitemap-metadata/save-sitemap-metadata', {\n            data: {\n                sitemapMetadataId: this.sitemapMetadataId,\n                siteId: this.siteId,\n                sourceKey: this.sourceKey,\n                type: this.type,\n                priority: this.priority,\n                changeFrequency: this.changeFrequency,\n                enabled: this.enabled,\n            },\n        }).then((response) => {\n\n            if (response.data.success === true) {\n                Craft.cp.displayNotice(Craft.t('sprout-module-sitemaps', 'Sitemap metadata saved.'));\n\n                this.sitemapMetadataId = response.data.sitemapMetadata.id;\n            } else {\n                Craft.cp.displayError(Craft.t('sprout-module-sitemaps', 'Unable to save Sitemap metadata.'));\n            }\n\n            if (self.enabled === '1') {\n                self.status.classList.remove('disabled');\n                self.status.classList.add('live');\n            } else {\n                self.status.classList.remove('live');\n                self.status.classList.add('disabled');\n            }\n\n        }).catch(() => {\n            Craft.cp.displayError(Craft.t('sprout-module-sitemaps', 'Unable to save Sitemap metadata.'));\n        });\n    },\n\n    toggleEnabledAndSaveSitemapMetadata() {\n        this.enabled = this.enabled === '1' ? '0' : '1';\n        this.saveSitemapMetadata();\n    },\n\n    deleteSitemapMetadata() {\n        let self = this;\n\n        Craft.sendActionRequest('POST', 'sprout-module-sitemaps/sitemap-metadata/delete-sitemap-metadata-by-id', {\n            data: {\n                sitemapMetadataId: this.sitemapMetadataId,\n            },\n        }).then((response) => {\n\n            if (response.data.success === true) {\n                self.row.remove();\n                Craft.cp.displayNotice(Craft.t('sprout-module-sitemaps', 'Sitemap metadata deleted.'));\n            } else {\n                Craft.cp.displayError(Craft.t('sprout-module-sitemaps', 'Unable to delete Sitemap metadata.'));\n            }\n\n            let customPageRows = document.querySelectorAll('#custom-pages tbody tr').length;\n\n            if (customPageRows <= 0) {\n                let customPagesTable = document.getElementById('custom-pages');\n                customPagesTable.remove();\n            }\n\n        }).catch(() => {\n            Craft.cp.displayError(Craft.t('sprout-module-sitemaps', 'Unable to delete Sitemap metadata.'));\n        });\n    },\n});\n","import './sitemap-metadata.css';\n\nimport Alpine from 'alpinejs';\nimport {SitemapMetadataRow} from './SitemapMetadataRow';\n\nwindow.Alpine = Alpine;\n\nAlpine.data('SitemapMetadataRow', SitemapMetadataRow);\n\nAlpine.start();\n"],"names":["SitemapMetadataRow","self","response","Alpine"],"mappings":"6CAAO,MAAMA,EAAqB,KAAO,CAErC,IAAK,KACL,kBAAmB,KACnB,OAAQ,KACR,UAAW,KACX,KAAM,KACN,IAAK,KACL,SAAU,KACV,gBAAiB,KACjB,QAAS,IACT,OAAQ,KAER,MAAO,CAEH,KAAK,IAAM,KAAK,MAAM,mBACtB,KAAK,OAAS,KAAK,IAAI,cAAc,aAAa,EAElD,KAAK,kBAAoB,KAAK,IAAI,QAAQ,mBAAqB,KAC/D,KAAK,OAAS,KAAK,IAAI,QAAQ,OAC/B,KAAK,UAAY,KAAK,IAAI,QAAQ,UAClC,KAAK,KAAO,KAAK,IAAI,QAAQ,KAC7B,KAAK,IAAM,KAAK,IAAI,QAAQ,IAC5B,KAAK,SAAW,KAAK,IAAI,QAAQ,SACjC,KAAK,gBAAkB,KAAK,IAAI,QAAQ,gBACxC,KAAK,QAAU,KAAK,IAAI,QAAQ,OACnC,EAED,qBAAsB,CAClB,IAAIC,EAAO,KAEX,MAAM,kBAAkB,OAAQ,gEAAiE,CAC7F,KAAM,CACF,kBAAmB,KAAK,kBACxB,OAAQ,KAAK,OACb,UAAW,KAAK,UAChB,KAAM,KAAK,KACX,SAAU,KAAK,SACf,gBAAiB,KAAK,gBACtB,QAAS,KAAK,OACjB,CACb,CAAS,EAAE,KAAMC,GAAa,CAEdA,EAAS,KAAK,UAAY,IAC1B,MAAM,GAAG,cAAc,MAAM,EAAE,yBAA0B,yBAAyB,CAAC,EAEnF,KAAK,kBAAoBA,EAAS,KAAK,gBAAgB,IAEvD,MAAM,GAAG,aAAa,MAAM,EAAE,yBAA0B,kCAAkC,CAAC,EAG3FD,EAAK,UAAY,KACjBA,EAAK,OAAO,UAAU,OAAO,UAAU,EACvCA,EAAK,OAAO,UAAU,IAAI,MAAM,IAEhCA,EAAK,OAAO,UAAU,OAAO,MAAM,EACnCA,EAAK,OAAO,UAAU,IAAI,UAAU,EAGpD,CAAS,EAAE,MAAM,IAAM,CACX,MAAM,GAAG,aAAa,MAAM,EAAE,yBAA0B,kCAAkC,CAAC,CACvG,CAAS,CACJ,EAED,qCAAsC,CAClC,KAAK,QAAU,KAAK,UAAY,IAAM,IAAM,IAC5C,KAAK,oBAAmB,CAC3B,EAED,uBAAwB,CACpB,IAAIA,EAAO,KAEX,MAAM,kBAAkB,OAAQ,wEAAyE,CACrG,KAAM,CACF,kBAAmB,KAAK,iBAC3B,CACb,CAAS,EAAE,KAAMC,GAAa,CAEdA,EAAS,KAAK,UAAY,IAC1BD,EAAK,IAAI,SACT,MAAM,GAAG,cAAc,MAAM,EAAE,yBAA0B,2BAA2B,CAAC,GAErF,MAAM,GAAG,aAAa,MAAM,EAAE,yBAA0B,oCAAoC,CAAC,EAG5E,SAAS,iBAAiB,wBAAwB,EAAE,QAEnD,GACK,SAAS,eAAe,cAAc,EAC5C,OAAM,CAGvC,CAAS,EAAE,MAAM,IAAM,CACX,MAAM,GAAG,aAAa,MAAM,EAAE,yBAA0B,oCAAoC,CAAC,CACzG,CAAS,CACJ,CACL,GC3FA,OAAO,OAASE,EAEhBA,EAAO,KAAK,qBAAsBH,CAAkB,EAEpDG,EAAO,MAAO"}