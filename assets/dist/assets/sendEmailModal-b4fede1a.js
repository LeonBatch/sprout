window.SendEmailModal=function(d){let a=$('.sprout-send-email-btn[data-email-id="'+d+'"]'),i=a.data("get-send-email-html-action"),r=a.data("send-email-action"),p=a.data("modal-title"),m=a.data("modal-action-btn-label"),c=Craft.t("sprout-module-mailer","Email sent."),u=Craft.t("sprout-module-mailer","Unable to send email.");Craft.sendActionRequest("POST",i,{data:{emailId:d}}).then(l=>{if(l.data.success){let t=$("<form/>",{class:"modal prompt"}).appendTo(Garnish.$bod),f=$("<div/>",{class:"header"}).appendTo(t);$("<h2/>",{text:p}).appendTo(f);let s=$("<div/>",{class:"body"}).append(l.data.html).appendTo(t);$("<input/>",{type:"hidden",name:"emailId",value:d}).appendTo(s);let b=$("<div/>",{class:"footer sprout-modal-footer-absolute"}).appendTo(t),n=$("<div/>",{class:"buttons right"}).appendTo(b),h=$("<button/>",{type:"button",class:"btn",text:Craft.t("sprout-module-mailer","Cancel")}).appendTo(n);$("<button/>",{type:"submit",class:"btn submit sprout-send-btn-bg",text:m}).appendTo(n),Craft.appendBodyHtml(l.data.js);let e=new Garnish.Modal(t,{onShow:()=>{setTimeout(()=>{Craft.setFocusWithin(s)},100)},onHide:()=>{}});t.on("submit",T=>{T.preventDefault();let y=Garnish.getPostData(event.target);Craft.sendActionRequest("POST",r,{data:Craft.expandPostArray(y)}).then(o=>{if(o.data.success)Craft.cp.displayNotice(c),e.hide(),e.destroy();else if(Craft.cp.displayError(u),o.data.errors){let C=$("<ul/>",{class:"errors"}).appendTo(s);for(let g of Object.keys(o.data.errors))$("<li/>",{text:o.data.errors[g]}).appendTo(C)}})}),h.on("click",()=>{e.hide(),e.destroy()})}})};
//# sourceMappingURL=sendEmailModal-b4fede1a.js.map
